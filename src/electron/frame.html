<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>PROCESS WARP</title>
    <link rel="stylesheet" href="node_modules/material-design-lite/material.min.css"/>
    <script src="node_modules/material-design-lite/material.min.js"></script>
    <link rel="stylesheet" href="icon.css">
  </head>
  <script>
    const electron = require('electron');
    const ipc      = electron.ipcRenderer;
    var global     = {};

    /**
     * When receive script, execute script.
     * @param event {object} Event instance from ipc.
     * @param script {string} Script string.
     */
    function recvScript(event, script) {
      console.log(script);
      eval(script);
    }
    ipc.on('script', recvScript);

    /**
     * When loading html was finished, send frame_load command to main thread.
     * @return {void}
     */
    function sendFrameLoad() {
      ipc.send('frame_load');
    }

    /**
     * When html has loaded, get canvas instance.
     * @return {void}
     */
    function setupCanvas() {
      global.canvas_fore = document.getElementById('canvas_fore');
      global.canvas_back = document.getElementById('canvas_back');
      global.context_fore = global.canvas_fore.getContext('2d');
      global.context_back = global.canvas_back.getContext('2d');
    }
  </script>
  <style>
    html {
      height: 100%;
      overflow: hidden;
      width: 100%;
    }
    body {
      height: 100%;
      overflow: hidden;
      width: 100%;
    }
    #canvas_fore {
      height: 100%;
      width: 100%;
      position: absolute;
      visibility: visible;
    }
    #canvas_back {
      height: 100%;
      width: 100%;
      position: absolute;
      visibility: hidden;
    }
  </style>
  <body onLoad="sendFrameLoad(); setupCanvas();">
    <canvas id="canvas_fore"></canvas>
    <canvas id="canvas_back"></canvas>
  </body>
</html>
